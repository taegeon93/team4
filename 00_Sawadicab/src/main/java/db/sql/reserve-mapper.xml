<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<!-- 	<entry key="searchCompany"> -->
<!-- 		SELECT DISTINCT COMPANY_NAME, C.COMPANY_ADDRESS, COMPANY_PICTURE, COMPANY_NUM -->
<!-- 		FROM COMPANY C -->
<!-- 		JOIN RESERVE USING(COMPANY_NAME) -->
<!-- 		WHERE (COMPANY_NAME LIKE '%' || ? || '%' -->
<!-- 		OR C.COMPANY_ADDRESS LIKE '%' || ? || '%') -->
<!-- 		AND (CHECKIN NOT BETWEEN ? AND ? -->
<!-- 		AND CHECKOUT NOT BETWEEN ? AND ?) -->
<!-- 	</entry> -->
	<entry key="searchCompany">
		SELECT DISTINCT COMPANY_NUM,COMPANY_NAME,C.COMPANY_ADDRESS,C.COMPANY_CATEGORY ,COMPANY_PICTURE, SCORE
		FROM COMPANY C
		    JOIN RESERVE USING(COMPANY_NAME)
		    JOIN (
		    SELECT COMPANY_NUM, AVG(SCORE) SCORE
		    FROM REVIEW 
		    JOIN COMPANY USING (COMPANY_NUM)
		    WHERE COMPANY_NAME LIKE '%' || ? || '%' OR
		    COMPANY_ADDRESS LIKE '%' || ? || '중구%'
		    GROUP BY COMPANY_NAME, COMPANY_NUM
		) SCORE USING(COMPANY_NUM)
		WHERE CHECKIN NOT BETWEEN ? AND ?
		        AND CHECKOUT NOT BETWEEN ? AND ?
	</entry>
</properties>